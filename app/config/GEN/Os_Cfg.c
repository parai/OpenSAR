/*
* Configuration of module: Os
*
* Created by:   parai          
* Copyright:    (C)parai@foxmail.com  
*
* Configured for (MCU):    MinGW ...
*
* Module vendor:           ArcCore
* Generator version:       2.0.34
*
* Generated by easySAR Studio (https://github.com/parai/OpenSAR)
*/

#include "kernel.h"


// ###############################    EXTERNAL REFERENCES    #############################

/* Application externals */

/* Interrupt externals */


// Set the os tick frequency
OsTickType OsTickFreq = 1000;


// ###############################    DEBUG OUTPUT     #############################
uint32 os_dbg_mask = 0;  //D_TASK|D_ALARM|D_EVENT;

// ###############################    APPLICATIONS     #############################
GEN_APPLICATION_HEAD = {
    GEN_APPLICATION(
                /* id           */ APPLICATION_ID_OsDefaultApplication,
                /* name         */ "OsDefaultApplication",
                /* trusted      */ true,    /* NOT CONFIGURABLE IN TOOLS */
                /* core         */ 0, /* Default value, multicore not enabled.*/
                /* StartupHook  */ NULL,
                /* ShutdownHook */ NULL,
                /* ErrorHook    */ NULL,
                /* rstrtTaskId  */ 0    /* NOT CONFIGURABLE IN TOOLS */
                ),                    
};  
    
// #################################    COUNTERS     ###############################
GEN_COUNTER_HEAD = {
	GEN_COUNTER(    COUNTER_ID_SystemCounter,
                    "SystemCounter",
                    COUNTER_TYPE_SOFT,     // Default
                    COUNTER_UNIT_TICKS,    // Default
                    0xFFFF,                // maxallowedvalue
                    1,                // ticksperbase
                    1,                // mincycle
                    0,            // TODO:Gpt Channel
                    APPLICATION_ID_OsDefaultApplication,    /* Application owner */
                    1                                       /* Accessing application mask */
                ),
};

	CounterType Os_Arc_OsTickCounter = COUNTER_ID_SystemCounter;

// ##################################    ALARMS     ################################
GEN_ALARM_AUTOSTART(ALARM_ID_Alarm10ms, ALARM_AUTOSTART_RELATIVE, 10, 10, OSDEFAULTAPPMODE );
GEN_ALARM_AUTOSTART(ALARM_ID_Alarm20ms, ALARM_AUTOSTART_RELATIVE, 10, 20, OSDEFAULTAPPMODE );
GEN_ALARM_AUTOSTART(ALARM_ID_Alarm100ms, ALARM_AUTOSTART_RELATIVE, 10, 100, OSDEFAULTAPPMODE );
GEN_ALARM_AUTOSTART(ALARM_ID_Alarm1000ms, ALARM_AUTOSTART_RELATIVE, 10, 1000, OSDEFAULTAPPMODE );
GEN_ALARM_HEAD = {
	GEN_ALARM(  ALARM_ID_Alarm10ms,
                "Alarm10ms",
                COUNTER_ID_SystemCounter,
                GEN_ALARM_AUTOSTART_NAME(ALARM_ID_Alarm10ms),
                ALARM_ACTION_ACTIVATETASK,
                TASK_ID_Task10ms,
                0,
                0,
                APPLICATION_ID_OsDefaultApplication,    /* Application owner */
                1    /* Accessing application mask */
            ),
 	GEN_ALARM(  ALARM_ID_Alarm20ms,
                "Alarm20ms",
                COUNTER_ID_SystemCounter,
                GEN_ALARM_AUTOSTART_NAME(ALARM_ID_Alarm20ms),
                ALARM_ACTION_ACTIVATETASK,
                TASK_ID_Task20ms,
                0,
                0,
                APPLICATION_ID_OsDefaultApplication,    /* Application owner */
                1    /* Accessing application mask */
            ),
 	GEN_ALARM(  ALARM_ID_Alarm100ms,
                "Alarm100ms",
                COUNTER_ID_SystemCounter,
                GEN_ALARM_AUTOSTART_NAME(ALARM_ID_Alarm100ms),
                ALARM_ACTION_ACTIVATETASK,
                TASK_ID_Task100ms,
                0,
                0,
                APPLICATION_ID_OsDefaultApplication,    /* Application owner */
                1    /* Accessing application mask */
            ),
 	GEN_ALARM(  ALARM_ID_Alarm_BswService,
                "Alarm_BswService",
                COUNTER_ID_SystemCounter,
                NULL,
                ALARM_ACTION_ACTIVATETASK,
                TASK_ID_SchM_BswService,
                0,
                0,
                APPLICATION_ID_OsDefaultApplication,    /* Application owner */
                1    /* Accessing application mask */
            ),
 	GEN_ALARM(  ALARM_ID_Alarm1000ms,
                "Alarm1000ms",
                COUNTER_ID_SystemCounter,
                GEN_ALARM_AUTOSTART_NAME(ALARM_ID_Alarm1000ms),
                ALARM_ACTION_ACTIVATETASK,
                TASK_ID_Task1000ms,
                0,
                0,
                APPLICATION_ID_OsDefaultApplication,    /* Application owner */
                1    /* Accessing application mask */
            ),
 };

// ################################    RESOURCES     ###############################

// ##############################    STACKS (TASKS)     ############################
DECLARE_STACK(OsIdle,OS_OSIDLE_STACK_SIZE);
DECLARE_STACK(Task100ms,512);
DECLARE_STACK(Task1000ms,512);
DECLARE_STACK(SchM_Startup,512);
DECLARE_STACK(SchM_BswService,512);
DECLARE_STACK(Task10ms,512);
DECLARE_STACK(Task20ms,512);
// ##################################    TASKS     #################################
GEN_TASK_HEAD = {
    GEN_BTASK(  /*                     */OsIdle,
                /* name                */"OsIdle",
                /* priority            */0,
                /* schedule            */FULL,
                /* autostart           */TRUE,
                /* resource_int_p   */NULL,
                /* resource mask    */0,
                /* activation lim.     */1,
                /* App owner        */0,
                /* Accessing apps   */1 
    ),
	GEN_BTASK(
        /*                     */Task100ms,
        /* name                */"Task100ms",
        /* priority            */5,
        /* schedule            */FULL,
        /* autostart           */False,
        /* resource_int_p   */NULL,    // TODO
        /* resource mask    */0,
        /* activation lim.     */1,
        /* App owner        */APPLICATION_ID_OsDefaultApplication,
        /* Accessing apps   */1
    ),
	GEN_ETASK(
        /*                     */Task1000ms,
        /* name                */"Task1000ms",
        /* priority            */5,
        /* schedule            */FULL,
        /* autostart           */False,
        /* resource_int_p   */NULL, // TODO
        /* resource mask    */0,
        /* event mask        */0x3f,
        /* App owner        */APPLICATION_ID_OsDefaultApplication,
        /* Accessing apps   */1
    ),
	GEN_BTASK(
        /*                     */SchM_Startup,
        /* name                */"SchM_Startup",
        /* priority            */15,
        /* schedule            */NON,
        /* autostart           */True,
        /* resource_int_p   */NULL,    // TODO
        /* resource mask    */0,
        /* activation lim.     */1,
        /* App owner        */APPLICATION_ID_OsDefaultApplication,
        /* Accessing apps   */1
    ),
	GEN_BTASK(
        /*                     */SchM_BswService,
        /* name                */"SchM_BswService",
        /* priority            */10,
        /* schedule            */FULL,
        /* autostart           */False,
        /* resource_int_p   */NULL,    // TODO
        /* resource mask    */0,
        /* activation lim.     */1,
        /* App owner        */APPLICATION_ID_OsDefaultApplication,
        /* Accessing apps   */1
    ),
	GEN_BTASK(
        /*                     */Task10ms,
        /* name                */"Task10ms",
        /* priority            */5,
        /* schedule            */FULL,
        /* autostart           */False,
        /* resource_int_p   */NULL,    // TODO
        /* resource mask    */0,
        /* activation lim.     */1,
        /* App owner        */APPLICATION_ID_OsDefaultApplication,
        /* Accessing apps   */1
    ),
	GEN_BTASK(
        /*                     */Task20ms,
        /* name                */"Task20ms",
        /* priority            */5,
        /* schedule            */FULL,
        /* autostart           */False,
        /* resource_int_p   */NULL,    // TODO
        /* resource mask    */0,
        /* activation lim.     */1,
        /* App owner        */APPLICATION_ID_OsDefaultApplication,
        /* Accessing apps   */1
    ),
};


// ##################################    HOOKS     #################################
GEN_HOOKS( 
    StartupHook, 
    NULL, 
    ShutdownHook, 
    ErrorHook,
    PreTaskHook, 
    PostTaskHook 
);

// ##################################    ISRS     ##################################

GEN_ISR_MAP = {
    0
};

// ############################    SCHEDULE TABLES     #############################
    
    